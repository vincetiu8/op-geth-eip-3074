# Geth Setup
## Installation
1. Install go, c, other deps
2. Run `make all`

This will build geth and other modules into the `./build/bin` folder to use.

## Setting up the cluster
1. Run `make account`
2. Paste the account address into the alloc field in `data/pn_genesis.json`
3. Run `make run`
4. Accept any terminal prompts to delete old files

This will set up an account and run a Geth node in the console.

## Setting up miner / interacting with geth
1. Start a new console
2. Run `make cli`
3. Run `personal.unlockAccount(YOUR_ACCOUNT_HERE)`
4. Enter password `test123`
5. Run `miner.setEtherbase(YOUR_ACCOUNT_HERE)`
6. Run `miner.start()`

You should now have a working cluster and be able to interact with other accounts.

## Sending transactions
1. Run `eth.sendTransaction({from: ACCOUNT_1, to: ACCOUNT_2, value: web3.toWei(ETH_BALANCE, "ether"), gas: GAS_VALUE})`

## Debugging contracts
1. Run `debug.traceTransaction(TRANSACTION)`

```
eth.defaultAccount = "0x71562b71999873db5b286df957af199ec94617f7"
personal.unlockAccount(eth.defaultAccount, "test123")
miner.setEtherbase(eth.defaultAccount)
miner.start()
eth.sendTransaction({to: "0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", value: web3.toWei(0.1, "ether"), gas: 1000000})
debug.traceTransaction(
```

```
PUSH1 0x80
PUSH1 0x40
MSTORE
CALLVALUE
DUP1
ISZERO
PUSH2 0x10
JUMPI
PUSH1 0x0
DUP1
REVERT
JUMPDEST
POP
PUSH2 0x2A5
DUP1
PUSH2 0x20
PUSH1 0x0
CODECOPY
PUSH1 0x0
RETURN INVALID
PUSH1 0x80
PUSH1 0x40
MSTORE
CALLVALUE
DUP1
ISZERO
PUSH2 0x10
JUMPI
PUSH1 0x0
DUP1
REVERT
JUMPDEST
POP
PUSH1 0x4
CALLDATASIZE
LT
PUSH2 0x36
JUMPI
PUSH1 0x0
CALLDATALOAD
PUSH1 0xE0
SHR
DUP1
PUSH4 0x3F4341B4
EQ
PUSH2 0x3B
JUMPI
DUP1
PUSH4 0xE034B8C8
EQ
PUSH2 0x57
JUMPI
JUMPDEST
PUSH1 0x0
DUP1
REVERT
JUMPDEST
PUSH2 0x55
PUSH1 0x4
DUP1
CALLDATASIZE
SUB
DUP2
ADD
SWAP1 PUSH2 0x50 SWAP2 SWAP1 PUSH2 0xCE JUMP JUMPDEST PUSH2 0x73 JUMP JUMPDEST STOP JUMPDEST PUSH2 0x71 PUSH1 0x4 DUP1 CALLDATASIZE SUB DUP2 ADD SWAP1 PUSH2 0x6C SWAP2 SWAP1 PUSH2 0x131 JUMP JUMPDEST PUSH2 0x80 JUMP JUMPDEST STOP JUMPDEST PUSH1 0x0 PUSH1 0x1 SWAP1 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH1 0x1 SWAP1 POP POP POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP2 CALLDATALOAD SWAP1 POP PUSH2 0x9E DUP2 PUSH2 0x20A JUMP JUMPDEST SWAP3 SWAP2 POP POP JUMP JUMPDEST PUSH1 0x0 DUP2 CALLDATALOAD SWAP1 POP PUSH2 0xB3 DUP2 PUSH2 0x221 JUMP JUMPDEST SWAP3 SWAP2 POP POP JUMP JUMPDEST PUSH1 0x0 DUP2 CALLDATALOAD SWAP1 POP PUSH2 0xC8 DUP2 PUSH2 0x238 JUMP JUMPDEST SWAP3 SWAP2 POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x80 DUP6 DUP8 SUB SLT ISZERO PUSH2 0xE4 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 PUSH2 0xF2 DUP8 DUP3 DUP9 ADD PUSH2 0xB9 JUMP JUMPDEST SWAP5 POP POP PUSH1 0x20 PUSH2 0x103 DUP8 DUP3 DUP9 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP4 POP POP PUSH1 0x40 PUSH2 0x114 DUP8 DUP3 DUP9 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP3 POP POP PUSH1 0x60 PUSH2 0x125 DUP8 DUP3 DUP9 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP2 POP POP SWAP3 SWAP6 SWAP2 SWAP5 POP SWAP3 POP JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0xC0 DUP8 DUP10 SUB SLT ISZERO PUSH2 0x14A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 PUSH2 0x158 DUP10 DUP3 DUP11 ADD PUSH2 0xB9 JUMP JUMPDEST SWAP7 POP POP PUSH1 0x20 PUSH2 0x169 DUP10 DUP3 DUP11 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP6 POP POP PUSH1 0x40 PUSH2 0x17A DUP10 DUP3 DUP11 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP5 POP POP PUSH1 0x60 PUSH2 0x18B DUP10 DUP3 DUP11 ADD PUSH2 0xA4 JUMP JUMPDEST SWAP4 POP POP PUSH1 0x80 PUSH2 0x19C DUP10 DUP3 DUP11 ADD PUSH2 0x8F JUMP JUMPDEST SWAP3 POP POP PUSH1 0xA0 PUSH2 0x1AD DUP10 DUP3 DUP11 ADD PUSH2 0x8F JUMP JUMPDEST SWAP2 POP POP SWAP3 SWAP6 POP SWAP3 SWAP6 POP SWAP3 SWAP6 JUMP JUMPDEST PUSH1 0x0 PUSH2 0x1C5 DUP3 PUSH2 0x1CC JUMP JUMPDEST SWAP1 POP SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 PUSH20 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF DUP3 AND SWAP1 POP SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 DUP2 SWAP1 POP SWAP2 SWAP1 POP JUMP JUMPDEST PUSH1 0x0 PUSH8 0xFFFFFFFFFFFFFFFF DUP3 AND SWAP1 POP SWAP2 SWAP1 POP JUMP JUMPDEST PUSH2 0x213 DUP2 PUSH2 0x1BA JUMP JUMPDEST DUP2 EQ PUSH2 0x21E JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP JUMPDEST PUSH2 0x22A DUP2 PUSH2 0x1EC JUMP JUMPDEST DUP2 EQ PUSH2 0x235 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP JUMPDEST PUSH2 0x241 DUP2 PUSH2 0x1F6 JUMP JUMPDEST DUP2 EQ PUSH2 0x24C JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP JUMP INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 PUSH8 0xF79A2D493A17EAF8 0xD3 CALLDATASIZE SLOAD 0xC1 MLOAD SWAP3 PUSH28 0x450CBF2635252A00CFB827CE5468AE3364736F6C637822302E382E32 0x2D PUSH4 0x692E3230 ORIGIN BALANCE 0x2E CALLER 0x2E CALLER BALANCE 0x2B PUSH4 0x6F6D6D69 PUSH21 0x2E6565363534636333005300000000000000000000
```